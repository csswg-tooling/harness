;
;  Copyright © 2011 Hewlett-Packard Development Company, L.P. 
;
;  This work is distributed under the W3C® Software License [1] 
;  in the hope that it will be useful, but WITHOUT ANY 
;  WARRANTY; without even the implied warranty of 
;  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. 
;
;  [1] http://www.w3.org/Consortium/Legal/2002/copyright-software-20021231 
;
;  Adapted from the Mobile Test Harness
;  Copyright © 2007 World Wide Web Consortium
;  http://dev.w3.org/cvsweb/2007/mobile-test-harness/


; System Info

[system]
debug = False
name = W3C Test Harness
maintenance = False ; bool or string - string will be custom message
maintenance.users = ; usernames allowed access during maintenance
maintenance.ips =   ; ip addresses allowed access during maintenance, accepts IPv4, IPv6 and netmasks

; Database configuration

[db]
host = localhost
user = testharness
password = 
database = testharness
database.users =
database.spidertrap =


; Server info

[server]
time_zone = 'America/Los_Angeles'
rewrite_urls = True
install_uri = 'http://test.w3.org/harness'            ; include port if not 80 or 443
secure_enabled = True                                 ; may use https for sensitive pages, bool or port number
secure_pages =                                        ; page keys for pages that go https is enabled
secure_args =                                         ; arg keys for pages that go https if enabled


; Contact info

[contact]
uri = mailto:webmaster@example.com  ; if empty uses $_SERVER['SERVER_ADMIN'], mailto: uris are obfuscated
name = 'the server administrator'


[cookie]
prefix = 'harness_'
duration = 31536000; default duration in seconds


; class used to handle system pages

[page_class]
home = WelcomePage
testsuite = TestSuitePage
testcase = TestCasePage
select_ua = SelectUserAgentPage
review = ReviewPage
results = ResultsPage
details = DetailsPage
success = SuccessPage
status_query = StatusQueryPage
spider_trap = SpiderTrapPage


; URIs used within the harness

; Stylesheet URIs used within the harness

[uri.stylesheet]
annotation = 'stylesheets/annotate.css'
base = 'stylesheets/base.css'
report = 'stylesheets/report.css'
test = 'stylesheets/testcase.css'
test_engine = 'stylesheets/test_%s.css'
testsuite = 'stylesheets/testsuite.css'


; Image URIs used within the harness

[uri.image]
please_help = 'img/please_help_12.png'


; User configuration

[user]
crypt_method = smd5       ; may be one of: 'smd5', 'apr1', 'md5', 'sha1', 'ssha', 'crypt', 'mysql', 'my411', 'kmd5'
default_groups = public   ; groups added to on account creation
role_order = admin, owner, public ; earlier roles include rights of following roles
external_auth =           ; type of external authentication to try, so far, only: 'ldap'
failure_warning = 5       ; number of failed login attempts to start warnings
failure_ban = 10          ; number of failed login attempts to ban at
failure_duration = 86400  ; number of seconds a failure is tracked - make sure this is less than or equal to spider trap ban period
token_duration = 14400    ; munber of seconds a login token is good for

; role to group mapping, list of groups where membership gives role
[role_groups]
admin = admins            ; full access
owner = peers             ; owns test suites
public = public           ; can comment

; ldap authentication server info
[ldap]
uri = 'ldaps://ldap.w3.org/'
base_dn = 'ou=people,dc=w3,dc=org'
groups_dn = 'ou=groups,dc=w3,dc=org'

; mapping of ldap groups to local groups
[ldap_groups]
;ldap_group = local_group


; Spider trap config

[spidertrap]
ban_threshold = 2   ; number of visits to trigger ban
test_period = 3     ; number of days to test for spider behavior
ban_period = 7      ; number of days to ban
whitelist_ips =     ; ip addresses that never get banned, ipv4, ipv6 and netmask allowed, ie: 2001:470:879a::/48

; Spider trap shell commands

[spidertrap.command]
ban = '/sbin/iptables -I INPUT -s {IPv4} -j DROP ; /sbin/ip6tables -I INPUT -s {IPv6} -j DROP'
release = '/sbin/iptables --delete INPUT -s {IPv4} -j DROP ; /sbin/ip6tables --delete INPUT -s {IPv6} -j DROP'
post_process = '/sbin/iptables-save > /etc/firewall.conf ; /sbin/ip6tables-save > /etc/firewall6.conf'


; Max field lengths for database tables

[db.max]
flags.flag = 15
flags.description = 255
flags.set_test = 255
flags.unset_test = 255

formats.format = 15
formats.title = 255
formats.description = 255
formats.home_uri = 255
formats.filter = 127

groups.group = 63

references.format = 15
references.reference = 255
references.uri = 255

results.revision = 40
results.format = 15
results.comment = 63

revisions.revision = 40
revisions.equal_revision = 40

specifications.spec = 31
specifications.title = 31
specifications.description = 255
specifications.base_uri = 255
specifications.home_uri = 63

sections.spec = 31
sections.section = 31
sections.title = 255
sections.uri = 255

statuscache.testsuite = 31

spidertrap.ip_address = 39
spidertrap.user_agent = 255
spidertrap.uri = 255

suitetests.testsuite = 31
suitetests.revision = 40

testcases.testcase = 63
testcases.last_revision = 40
testcases.title = 255
testcases.flags = 255
testcases.assertion = 1023
testcases.credits = 255

testpages.format = 15
testpages.uri = 255

testsequence.testsuite = 31
testsequence.engine = 15

testsuites.testsuite = 31
testsuites.base_uri = 255
testsuites.home_uri = 63
testsuites.spec_uri = 255
testsuites.spec = 31
testsuites.title = 255
testsuites.formats = 127
testsuites.optional_flags = 127
testsuites.contact_name = 63
testsuites.contact_uri = 255

useragents.useragent = 255
useragents.engine = 15
useragents.engine_version = 15
useragents.browser = 31
useragents.browser_version = 15
useragents.platform = 31
useragents.platform_version = 31

users.user = 31
users.password = 63
users.full_name = 255
users.alt_name = 255
users.email = 255
users.alt_email = 255
users.uri = 255
users.ip_address = 39

